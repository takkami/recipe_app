<h1 class="page-title">レシピ一覧</h1>

<div class="search-box">
  <%= search_form_for @q, url: request.path, method: :get do |f| %>
    <div class="search-box__inner">
      <%= f.search_field :title_or_ingredients_or_memo_cont, placeholder: "キーワードで検索", class: "search-input" %>
      <%= f.submit "検索", class: "btn btn--search" %>
      <%= link_to "クリア", request.path, class: "btn btn--ghost" %>
    </div>
  <% end %>
</div>

<div class="recipe-grid">
  <% @recipes.each do |recipe| %>
    <div class="recipe-card">
      <%= link_to recipe_path(recipe), class: "recipe-card__link" do %>
        <div class="recipe-card__image">
          <% if recipe.image.attached? %>
            <%= image_tag recipe.image.variant(resize_to_limit: [480, 480]), class: "recipe-card__img", alt: recipe.title %>
          <% else %>
            <%= image_tag "default-recipe.png", class: "recipe-card__img" %>
          <% end %>
        </div>
        <div class="recipe-card__content">
          <h2 class="recipe-card__title"><%= recipe.title %></h2>
        </div>
      <% end %>
      <div class="recipe-card__actions">
        <span class="recipe-card__author"><%= recipe.user.email %></span>
        <%= render "favorite_button", recipe: recipe %>
      </div>
    </div>
  <% end %>
</div>
